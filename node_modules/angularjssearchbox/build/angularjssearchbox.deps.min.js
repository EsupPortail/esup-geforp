"use strict";angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var e=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(t,n){function a(a,i){function s(e,t){return e.map(function(e,n){var a,i,s={};return s[h]=e,a=c(t,s),i=f(t,s)||n,{label:a,value:i}})}var r={},o=angular.extend({},e,i);r.$values=[];var l,c,h,d,u,f,p;return r.init=function(){r.$match=l=a.match(o.regexp),c=t(l[2]||l[1]),h=l[4]||l[6],d=l[5],u=t(l[3]||""),f=t(l[2]?l[1]:h),p=t(l[7])},r.valuesFn=function(e,t){return n.when(p(e,t)).then(function(t){return r.$values=t?s(t,e):{},r.$values})},r.init(),r}return a}]}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var e=(angular.element,{}),t=e.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};e.css=function(e,t,n){var a;return a=e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e)[t]:e.style[t],n===!0?parseFloat(a)||0:a},e.offset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument;return{width:e.offsetWidth,height:e.offsetHeight,top:t.top+(window.pageYOffset||n.documentElement.scrollTop)-(n.documentElement.clientTop||0),left:t.left+(window.pageXOffset||n.documentElement.scrollLeft)-(n.documentElement.clientLeft||0)}},e.position=function(a){var i,s,r={top:0,left:0};return"fixed"===e.css(a,"position")?s=a.getBoundingClientRect():(i=n(a),s=e.offset(a),s=e.offset(a),t(i,"html")||(r=e.offset(i)),r.top+=e.css(i,"borderTopWidth",!0),r.left+=e.css(i,"borderLeftWidth",!0)),{width:a.offsetWidth,height:a.offsetHeight,top:s.top-r.top-e.css(a,"marginTop",!0),left:s.left-r.left-e.css(a,"marginLeft",!0)}};var n=function(n){var a=n.ownerDocument,i=n.offsetParent||a;if(t(i,"#document"))return a.documentElement;for(;i&&!t(i,"html")&&"static"===e.css(i,"position");)i=i.offsetParent;return i||a.documentElement};return e.height=function(t,n){var a=t.offsetHeight;return n?a+=e.css(t,"marginTop",!0)+e.css(t,"marginBottom",!0):a-=e.css(t,"paddingTop",!0)+e.css(t,"paddingBottom",!0)+e.css(t,"borderTopWidth",!0)+e.css(t,"borderBottomWidth",!0),a},e.width=function(t,n){var a=t.offsetWidth;return n?a+=e.css(t,"marginLeft",!0)+e.css(t,"marginRight",!0):a-=e.css(t,"paddingLeft",!0)+e.css(t,"paddingRight",!0)+e.css(t,"borderLeftWidth",!0)+e.css(t,"borderRightWidth",!0),a},e}]),function(e){function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e,t){return function(n){return h(e.call(this,n),t)}}function a(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function s(e){w(e),o(this,e)}function r(e){var t=g(e),n=t.year||0,a=t.month||0,i=t.week||0,s=t.day||0,r=t.hour||0,o=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*o+36e5*r,this._days=+s+7*i,this._months=+a+12*n,this._data={},this._bubble()}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function l(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&gt.hasOwnProperty(t)&&(n[t]=e[t]);return n}function c(e){return 0>e?Math.ceil(e):Math.floor(e)}function h(e,t,n){for(var a=""+Math.abs(e),i=e>=0;a.length<t;)a="0"+a;return(i?n?"+":"":"-")+a}function d(e,t,n,a){var i,s,r=t._milliseconds,o=t._days,l=t._months;r&&e._d.setTime(+e._d+r*n),(o||l)&&(i=e.minute(),s=e.hour()),o&&e.date(e.date()+o*n),l&&e.month(e.month()+l*n),r&&!a&&at.updateOffset(e),(o||l)&&(e.minute(i),e.hour(s))}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function p(e,t,n){var a,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(a=0;i>a;a++)(n&&e[a]!==t[a]||!n&&v(e[a])!==v(t[a]))&&r++;return r+s}function m(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=zt[e]||Ut[t]||t}return e}function g(e){var t,n,a={};for(n in e)e.hasOwnProperty(n)&&(t=m(n),t&&(a[t]=e[n]));return a}function y(t){var n,a;if(0===t.indexOf("week"))n=7,a="day";else{if(0!==t.indexOf("month"))return;n=12,a="month"}at[t]=function(i,s){var r,o,l=at.fn._lang[t],c=[];if("number"==typeof i&&(s=i,i=e),o=function(e){var t=at().utc().set(a,e);return l.call(at.fn._lang,t,i||"")},null!=s)return o(s);for(r=0;n>r;r++)c.push(o(r));return c}}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function D(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function b(e){return _(e)?366:365}function _(e){return e%4===0&&e%100!==0||e%400===0}function w(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ct]<0||e._a[ct]>11?ct:e._a[ht]<1||e._a[ht]>D(e._a[lt],e._a[ct])?ht:e._a[dt]<0||e._a[dt]>23?dt:e._a[ut]<0||e._a[ut]>59?ut:e._a[ft]<0||e._a[ft]>59?ft:e._a[pt]<0||e._a[pt]>999?pt:-1,e._pf._overflowDayOfYear&&(lt>t||t>ht)&&(t=ht),e._pf.overflow=t)}function k(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function Y(e){return e?e.toLowerCase().replace("_","-"):e}function $(e,t){return t._isUTC?at(e).zone(t._offset||0):at(e).local()}function M(e,t){return t.abbr=e,mt[e]||(mt[e]=new i),mt[e].set(t),mt[e]}function C(e){delete mt[e]}function L(e){var t,n,a,i,s=0,r=function(e){if(!mt[e]&&yt)try{require("./lang/"+e)}catch(t){}return mt[e]};if(!e)return at.fn._lang;if(!u(e)){if(n=r(e))return n;e=[e]}for(;s<e.length;){for(i=Y(e[s]).split("-"),t=i.length,a=Y(e[s+1]),a=a?a.split("-"):null;t>0;){if(n=r(i.slice(0,t).join("-")))return n;if(a&&a.length>=t&&p(i,a,!0)>=t-1)break;t--}s++}return at.fn._lang}function x(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function O(e){var t,n,a=e.match(_t);for(t=0,n=a.length;n>t;t++)a[t]=Jt[a[t]]?Jt[a[t]]:x(a[t]);return function(i){var s="";for(t=0;n>t;t++)s+=a[t]instanceof Function?a[t].call(i,e):a[t];return s}}function S(e,t){return e.isValid()?(t=R(t,e.lang()),Nt[t]||(Nt[t]=O(t)),Nt[t](e)):e.lang().invalidDate()}function R(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(wt.lastIndex=0;a>=0&&wt.test(e);)e=e.replace(wt,n),wt.lastIndex=0,a-=1;return e}function T(e,t){var n,a=t._strict;switch(e){case"DDDD":return Pt;case"YYYY":case"GGGG":case"gggg":return a?Ft:$t;case"Y":case"G":case"g":return It;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?Wt:Mt;case"S":if(a)return Rt;case"SS":if(a)return Tt;case"SSS":if(a)return Pt;case"DDD":return Yt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Lt;case"a":case"A":return L(t._l)._meridiemParse;case"X":return St;case"Z":case"ZZ":return xt;case"T":return Ot;case"SSSS":return Ct;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?Tt:kt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return kt;default:return n=new RegExp(H(G(e.replace("\\","")),"i"))}}function P(e){e=e||"";var t=e.match(xt)||[],n=t[t.length-1]||[],a=(n+"").match(Bt)||["-",0,0],i=+(60*a[1])+v(a[2]);return"+"===a[0]?-i:i}function F(e,t,n){var a,i=n._a;switch(e){case"M":case"MM":null!=t&&(i[ct]=v(t)-1);break;case"MMM":case"MMMM":a=L(n._l).monthsParse(t),null!=a?i[ct]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[ht]=v(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=v(t));break;case"YY":i[lt]=v(t)+(v(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":i[lt]=v(t);break;case"a":case"A":n._isPm=L(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[dt]=v(t);break;case"m":case"mm":i[ut]=v(t);break;case"s":case"ss":i[ft]=v(t);break;case"S":case"SS":case"SSS":case"SSSS":i[pt]=v(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=P(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function W(e){var t,n,a,i,s,r,o,l,c,h,d=[];if(!e._d){for(a=E(e),e._w&&null==e._a[ht]&&null==e._a[ct]&&(s=function(t){var n=parseInt(t,10);return t?t.length<3?n>68?1900+n:2e3+n:n:null==e._a[lt]?at().weekYear():e._a[lt]},r=e._w,null!=r.GG||null!=r.W||null!=r.E?o=q(s(r.GG),r.W||1,r.E,4,1):(l=L(e._l),c=null!=r.d?N(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,h=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&h++,o=q(s(r.gg),h,c,l._week.doy,l._week.dow)),e._a[lt]=o.year,e._dayOfYear=o.dayOfYear),e._dayOfYear&&(i=null==e._a[lt]?a[lt]:e._a[lt],e._dayOfYear>b(i)&&(e._pf._overflowDayOfYear=!0),n=U(i,0,e._dayOfYear),e._a[ct]=n.getUTCMonth(),e._a[ht]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=d[t]=a[t];for(;7>t;t++)e._a[t]=d[t]=null==e._a[t]?2===t?1:0:e._a[t];d[dt]+=v((e._tzm||0)/60),d[ut]+=v((e._tzm||0)%60),e._d=(e._useUTC?U:z).apply(null,d)}}function I(e){var t;e._d||(t=g(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],W(e))}function E(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function A(e){e._a=[],e._pf.empty=!0;var t,n,a,i,s,r=L(e._l),o=""+e._i,l=o.length,c=0;for(a=R(e._f,r).match(_t)||[],t=0;t<a.length;t++)i=a[t],n=(o.match(T(i,e))||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&e._pf.unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),c+=n.length),Jt[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),F(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=l-c,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[dt]<12&&(e._a[dt]+=12),e._isPm===!1&&12===e._a[dt]&&(e._a[dt]=0),W(e),w(e)}function G(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,i){return t||n||a||i})}function H(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e){var n,a,i,s,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(s=0;s<e._f.length;s++)r=0,n=o({},e),n._pf=t(),n._f=e._f[s],A(n),k(n)&&(r+=n._pf.charsLeftOver,r+=10*n._pf.unusedTokens.length,n._pf.score=r,(null==i||i>r)&&(i=r,a=n));o(e,a||n)}function j(e){var t,n,a=e._i,i=Et.exec(a);if(i){for(e._pf.iso=!0,t=0,n=Gt.length;n>t;t++)if(Gt[t][1].exec(a)){e._f=Gt[t][0]+(i[6]||" ");break}for(t=0,n=Ht.length;n>t;t++)if(Ht[t][1].exec(a)){e._f+=Ht[t][0];break}a.match(xt)&&(e._f+="Z"),A(e)}else e._d=new Date(a)}function V(t){var n=t._i,a=vt.exec(n);n===e?t._d=new Date:a?t._d=new Date(+a[1]):"string"==typeof n?j(t):u(n)?(t._a=n.slice(0),W(t)):f(n)?t._d=new Date(+n):"object"==typeof n?I(t):t._d=new Date(n)}function z(e,t,n,a,i,s,r){var o=new Date(e,t,n,a,i,s,r);return 1970>e&&o.setFullYear(e),o}function U(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function N(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Z(e,t,n,a,i){return i.relativeTime(t||1,!!n,e,a)}function K(e,t,n){var a=ot(Math.abs(e)/1e3),i=ot(a/60),s=ot(i/60),r=ot(s/24),o=ot(r/365),l=45>a&&["s",a]||1===i&&["m"]||45>i&&["mm",i]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",ot(r/30)]||1===o&&["y"]||["yy",o];return l[2]=t,l[3]=e>0,l[4]=n,Z.apply({},l)}function J(e,t,n){var a,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),a=at(e).add("d",s),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function q(e,t,n,a,i){var s,r,o=U(e,0,1).getUTCDay();return n=null!=n?n:i,s=i-o+(o>a?7:0)-(i>o?7:0),r=7*(t-1)+(n-i)+s+1,{year:r>0?e:e-1,dayOfYear:r>0?r:b(e-1)+r}}function X(e){var t=e._i,n=e._f;return null===t?at.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=L().preparse(t)),at.isMoment(t)?(e=l(t),e._d=new Date(+t._d)):n?u(n)?B(e):A(e):V(e),new s(e))}function Q(e,t){at.fn[e]=at.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),at.updateOffset(this),this):this._d["get"+n+t]()}}function et(e){at.duration.fn[e]=function(){return this._data[e]}}function tt(e,t){at.duration.fn["as"+e]=function(){return+this/t}}function nt(e){var t=!1,n=at;"undefined"==typeof ender&&(e?(rt.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},o(rt.moment,n)):rt.moment=at)}for(var at,it,st="2.5.1",rt=this,ot=Math.round,lt=0,ct=1,ht=2,dt=3,ut=4,ft=5,pt=6,mt={},gt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},yt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,vt=/^\/?Date\((\-?\d+)/i,Dt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,bt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,kt=/\d\d?/,Yt=/\d{1,3}/,$t=/\d{1,4}/,Mt=/[+\-]?\d{1,6}/,Ct=/\d+/,Lt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,xt=/Z|[\+\-]\d\d:?\d\d/gi,Ot=/T/i,St=/[\+\-]?\d+(\.\d{1,3})?/,Rt=/\d/,Tt=/\d\d/,Pt=/\d{3}/,Ft=/\d{4}/,Wt=/[+-]?\d{6}/,It=/[+-]?\d+/,Et=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,At="YYYY-MM-DDTHH:mm:ssZ",Gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ht=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Bt=/([\+\-]|\d\d)/gi,jt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Vt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},zt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ut={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Nt={},Zt="DDD w W M D d".split(" "),Kt="M D H h m s w W".split(" "),Jt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},YYYYY:function(){return h(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+h(Math.abs(e),6)},gg:function(){return h(this.weekYear()%100,2)},gggg:function(){return h(this.weekYear(),4)},ggggg:function(){return h(this.weekYear(),5)},GG:function(){return h(this.isoWeekYear()%100,2)},GGGG:function(){return h(this.isoWeekYear(),4)},GGGGG:function(){return h(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return v(this.milliseconds()/100)},SS:function(){return h(v(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},SSSS:function(){return h(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+h(v(e/60),2)+":"+h(v(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+h(v(e/60),2)+h(v(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Zt.length;)it=Zt.pop(),Jt[it+"o"]=a(Jt[it],it);for(;Kt.length;)it=Kt.pop(),Jt[it+it]=n(Jt[it],2);for(Jt.DDDD=n(Jt.DDD,3),o(i.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,a;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=at.utc([2e3,t]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(a.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=at([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,a):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return J(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),at=function(n,a,i,s){var r;return"boolean"==typeof i&&(s=i,i=e),r={},r._isAMomentObject=!0,r._i=n,r._f=a,r._l=i,r._strict=s,r._isUTC=!1,r._pf=t(),X(r)},at.utc=function(n,a,i,s){var r;return"boolean"==typeof i&&(s=i,i=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=i,r._i=n,r._f=a,r._strict=s,r._pf=t(),X(r).utc()},at.unix=function(e){return at(1e3*e)},at.duration=function(e,t){var n,a,i,s=e,o=null;return at.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(o=Dt.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:v(o[ht])*n,h:v(o[dt])*n,m:v(o[ut])*n,s:v(o[ft])*n,ms:v(o[pt])*n}):(o=bt.exec(e))&&(n="-"===o[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},s={y:i(o[2]),M:i(o[3]),d:i(o[4]),h:i(o[5]),m:i(o[6]),s:i(o[7]),w:i(o[8])}),a=new r(s),at.isDuration(e)&&e.hasOwnProperty("_lang")&&(a._lang=e._lang),a},at.version=st,at.defaultFormat=At,at.updateOffset=function(){},at.lang=function(e,t){var n;return e?(t?M(Y(e),t):null===t?(C(e),e="en"):mt[e]||L(e),n=at.duration.fn._lang=at.fn._lang=L(e),n._abbr):at.fn._lang._abbr},at.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),L(e)},at.isMoment=function(e){return e instanceof s||null!=e&&e.hasOwnProperty("_isAMomentObject")},at.isDuration=function(e){return e instanceof r},it=qt.length-1;it>=0;--it)y(qt[it]);for(at.normalizeUnits=function(e){return m(e)},at.invalid=function(e){var t=at.utc(0/0);return null!=e?o(t._pf,e):t._pf.userInvalidated=!0,t},at.parseZone=function(e){return at(e).parseZone()},o(at.fn=s.prototype,{clone:function(){return at(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=at(this).utc();return 0<e.year()&&e.year()<=9999?S(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?at.utc(this._a):at(this._a)).toArray())>0:!1},parsingFlags:function(){return o({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=S(this,e||at.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?at.duration(+t,e):at.duration(e,t),d(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?at.duration(+t,e):at.duration(e,t),d(this,n,-1),this},diff:function(e,t,n){var a,i,s=$(e,this),r=6e4*(this.zone()-s.zone());return t=m(t),"year"===t||"month"===t?(a=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),i+=(this-at(this).startOf("month")-(s-at(s).startOf("month")))/a,i-=6e4*(this.zone()-at(this).startOf("month").zone()-(s.zone()-at(s).startOf("month").zone()))/a,"year"===t&&(i/=12)):(a=this-s,i="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-r)/864e5:"week"===t?(a-r)/6048e5:a),n?i:c(i)},from:function(e,t){return at.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(at(),e)},calendar:function(){var e=$(at(),this).startOf("day"),t=this.diff(e,"days",!0),n=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return _(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=N(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),at.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=m(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=m(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+at(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+at(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+$(e,this).startOf(t)},min:function(e){return e=at.apply(null,arguments),this>e?this:e},max:function(e){return e=at.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=P(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&d(this,at.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?at(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(e){var t=ot((at(this).startOf("day")-at(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=J(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=J(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=m(e),this[e]()},set:function(e,t){return e=m(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=L(t),this)}}),it=0;it<jt.length;it++)Q(jt[it].toLowerCase().replace(/s$/,""),jt[it]);Q("year","FullYear"),at.fn.days=at.fn.day,at.fn.months=at.fn.month,at.fn.weeks=at.fn.week,at.fn.isoWeeks=at.fn.isoWeek,at.fn.toJSON=at.fn.toISOString,o(at.duration.fn=r.prototype,{_bubble:function(){var e,t,n,a,i=this._milliseconds,s=this._days,r=this._months,o=this._data;o.milliseconds=i%1e3,e=c(i/1e3),o.seconds=e%60,t=c(e/60),o.minutes=t%60,n=c(t/60),o.hours=n%24,s+=c(n/24),o.days=s%30,r+=c(s/30),o.months=r%12,a=c(r/12),o.years=a},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},humanize:function(e){var t=+this,n=K(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=at.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=at.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=m(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=m(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:at.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||i||s?"T":"")+(a?a+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(it in Vt)Vt.hasOwnProperty(it)&&(tt(it,Vt[it]),et(it.toLowerCase()));tt("Weeks",6048e5),at.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},at.lang("en",{ordinal:function(e){var t=e%10,n=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),yt?(module.exports=at,nt(!0)):"function"==typeof define&&define.amd?define("moment",function(t,n,a){return a.config&&a.config()&&a.config().noGlobal!==!0&&nt(a.config().noGlobal===e),at}):nt()}.call(this),!function(e,t){var n=function(t,n,a){this.parentEl="body",this.element=e(t);var i='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>';("object"!=typeof n||null===n)&&(n={}),this.parentEl=e("object"==typeof n&&n.parentEl&&e(n.parentEl).length?n.parentEl:this.parentEl),this.container=e(i).appendTo(this.parentEl),this.setOptions(n,a);var s=this.container;e.each(this.buttonClasses,function(e,t){s.find("button").addClass(t)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.enterDate,this)).on("mouseleave.daterangepicker","td.available",e.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",e.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",e.proxy(this.showCalendars,this)).on("click.daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",e.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",e.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",e.proxy(this.toggle,this))};n.prototype={constructor:n,setOptions:function(n,a){if(this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t()._lang._weekdaysMin.slice(),monthNames:t()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},"string"==typeof n.format&&(this.format=n.format),"string"==typeof n.separator&&(this.separator=n.separator),"string"==typeof n.startDate&&(this.startDate=t(n.startDate,this.format)),"string"==typeof n.endDate&&(this.endDate=t(n.endDate,this.format)),"string"==typeof n.minDate&&(this.minDate=t(n.minDate,this.format)),"string"==typeof n.maxDate&&(this.maxDate=t(n.maxDate,this.format)),"object"==typeof n.startDate&&(this.startDate=t(n.startDate)),"object"==typeof n.endDate&&(this.endDate=t(n.endDate)),"object"==typeof n.minDate&&(this.minDate=t(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=t(n.maxDate)),"string"==typeof n.applyClass&&(this.applyClass=n.applyClass),"string"==typeof n.cancelClass&&(this.cancelClass=n.cancelClass),"object"==typeof n.dateLimit&&(this.dateLimit=n.dateLimit),"object"==typeof n.locale){if("object"==typeof n.locale.daysOfWeek&&(this.locale.daysOfWeek=n.locale.daysOfWeek.slice()),"object"==typeof n.locale.monthNames&&(this.locale.monthNames=n.locale.monthNames.slice()),"number"==typeof n.locale.firstDay){this.locale.firstDay=n.locale.firstDay;
for(var i=n.locale.firstDay;i>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),i--}"string"==typeof n.locale.applyLabel&&(this.locale.applyLabel=n.locale.applyLabel),"string"==typeof n.locale.cancelLabel&&(this.locale.cancelLabel=n.locale.cancelLabel),"string"==typeof n.locale.fromLabel&&(this.locale.fromLabel=n.locale.fromLabel),"string"==typeof n.locale.toLabel&&(this.locale.toLabel=n.locale.toLabel),"string"==typeof n.locale.weekLabel&&(this.locale.weekLabel=n.locale.weekLabel),"string"==typeof n.locale.customRangeLabel&&(this.locale.customRangeLabel=n.locale.customRangeLabel)}"string"==typeof n.opens&&(this.opens=n.opens),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=[n.buttonClasses]),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"boolean"==typeof n.singleDatePicker&&(this.singleDatePicker=n.singleDatePicker),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker12Hour&&(this.timePicker12Hour=n.timePicker12Hour);var s,r,o;if("undefined"==typeof n.startDate&&"undefined"==typeof n.endDate&&e(this.element).is("input[type=text]")){var l=e(this.element).val(),c=l.split(this.separator);s=r=null,2==c.length?(s=t(c[0],this.format),r=t(c[1],this.format)):this.singleDatePicker&&(s=t(l,this.format),r=t(l,this.format)),null!==s&&null!==r&&(this.startDate=s,this.endDate=r)}if("object"==typeof n.ranges){for(o in n.ranges)s=t(n.ranges[o][0]),r=t(n.ranges[o][1]),this.minDate&&s.isBefore(this.minDate)&&(s=t(this.minDate)),this.maxDate&&r.isAfter(this.maxDate)&&(r=t(this.maxDate)),this.minDate&&r.isBefore(this.minDate)||this.maxDate&&s.isAfter(this.maxDate)||(this.ranges[o]=[s,r]);var h="<ul>";for(o in this.ranges)h+="<li>"+o+"</li>";h+="<li>"+this.locale.customRangeLabel+"</li>",h+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(h)}if("function"==typeof a&&(this.cb=a),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:t([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:t([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens){var d=this.container.find(".calendar.left"),u=this.container.find(".calendar.right");d.removeClass("left").addClass("right"),u.removeClass("right").addClass("left")}"undefined"!=typeof n.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.separator),n=null,a=null;2===e.length&&(n=t(e[0],this.format),a=t(e[1],this.format)),(this.singleDatePicker||null===n||null===a)&&(n=t(this.element.val(),this.format),a=n),a.isBefore(n)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=n,this.endDate=a,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var t={top:0,left:0};this.parentEl.is("body")||(t={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()}),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-t.top,right:e(window).width()-this.element.offset().left-this.element.outerWidth()-t.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-t.top,left:this.element.offset().left-t.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>e(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.element.addClass("active"),this.container.show(),this.move(),e(document).on("click.daterangepicker",e.proxy(this.outsideClick,this)),e(document).on("click.daterangepicker","[data-toggle=dropdown]",e.proxy(this.outsideClick,this)),this.element.trigger("show.daterangepicker",this)},outsideClick:function(t){var n=e(t.target);n.closest(this.element).length||n.closest(this.container).length||n.closest(".calendar-date").length||this.hide()},hide:function(){e(document).off("click.daterangepicker",this.outsideClick),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.element.trigger("hide.daterangepicker",this)},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move()},hideCalendars:function(){this.container.removeClass("show-calendar")},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.startDate.format(this.format))},clickRange:function(e){var t=e.target.innerHTML;if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[t];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(t){var n=e(t.target).attr("data-title"),a=n.substr(1,1),i=n.substr(3,1),s=e(t.target).parents(".calendar");s.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[a][i].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[a][i].format(this.format))},clickDate:function(n){var a,i,s=e(n.target).attr("data-title"),r=s.substr(1,1),o=s.substr(3,1),l=e(n.target).parents(".calendar");if(l.hasClass("left")){if(a=this.leftCalendar.calendar[r][o],i=this.endDate,"object"==typeof this.dateLimit){var c=t(a).add(this.dateLimit).startOf("day");i.isAfter(c)&&(i=c)}}else if(a=this.startDate,i=this.rightCalendar.calendar[r][o],"object"==typeof this.dateLimit){var h=t(i).subtract(this.dateLimit).startOf("day");a.isBefore(h)&&(a=h)}if(this.singleDatePicker&&l.hasClass("left")?i=a.clone():this.singleDatePicker&&l.hasClass("right")&&(a=i.clone()),l.find("td").removeClass("active"),a.isSame(i)||a.isBefore(i))e(n.target).addClass("active"),this.startDate=a,this.endDate=i,this.chosenLabel=this.locale.customRangeLabel;else if(a.isAfter(i)){e(n.target).addClass("active");var d=this.endDate.diff(this.startDate);this.startDate=a,this.endDate=t(a).add("ms",d),this.chosenLabel=this.locale.customRangeLabel}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars(),this.timePicker||i.endOf("day"),this.singleDatePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(t){var n=e(t.target).closest(".calendar").hasClass("left"),a=n?"left":"right",i=this.container.find(".calendar."+a),s=parseInt(i.find(".monthselect").val(),10),r=i.find(".yearselect").val();this[a+"Calendar"].month.month(s).year(r),this.updateCalendars()},updateTime:function(t){var n=e(t.target).closest(".calendar").hasClass("left"),a=n?"left":"right",i=this.container.find(".calendar."+a),s=parseInt(i.find(".hourselect").val(),10),r=parseInt(i.find(".minuteselect").val(),10);if(this.timePicker12Hour){var o=i.find(".ampmselect").val();"PM"===o&&12>s&&(s+=12),"AM"===o&&12===s&&(s=0)}if(n){var l=this.startDate.clone();l.hour(s),l.minute(r),this.startDate=l,this.leftCalendar.month.hour(s).minute(r)}else{var c=this.endDate.clone();c.hour(s),c.minute(r),this.endDate=c,this.rightCalendar.month.hour(s).minute(r)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var e=!0,t=0;for(var n in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()),t++;e&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html())},buildCalendar:function(e,n,a,i){var s,r=t([n,e,1]),o=t(r).subtract("month",1).month(),l=t(r).subtract("month",1).year(),c=t([l,o]).daysInMonth(),h=r.day(),d=[];for(s=0;6>s;s++)d[s]=[];var u=c-h+this.locale.firstDay+1;u>c&&(u-=7),h==this.locale.firstDay&&(u=c-6);var f,p,m=t([l,o,u,12,i]);for(s=0,f=0,p=0;42>s;s++,f++,m=t(m).add("hour",24))s>0&&f%7===0&&(f=0,p++),d[p][f]=m.clone().hour(a),m.hour(12);return d},renderDropdowns:function(e,t,n){for(var a=e.month(),i='<select class="monthselect">',s=!1,r=!1,o=0;12>o;o++)(!s||o>=t.month())&&(!r||o<=n.month())&&(i+="<option value='"+o+"'"+(o===a?" selected='selected'":"")+">"+this.locale.monthNames[o]+"</option>");i+="</select>";for(var l=e.year(),c=n&&n.year()||l+5,h=t&&t.year()||l-50,d='<select class="yearselect">',u=h;c>=u;u++)d+='<option value="'+u+'"'+(u===l?' selected="selected"':"")+">"+u+"</option>";return d+="</select>",i+d},renderCalendar:function(t,n,a,i){var s='<div class="calendar-date">';s+='<table class="table-condensed">',s+="<thead>",s+="<tr>",this.showWeekNumbers&&(s+="<th></th>"),s+=!a||a.isBefore(t[1][1])?'<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var r=this.locale.monthNames[t[1][1].month()]+t[1][1].format(" YYYY");this.showDropdowns&&(r=this.renderDropdowns(t[1][1],a,i)),s+='<th colspan="5" class="month">'+r+"</th>",s+=!i||i.isAfter(t[1][1])?'<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",s+="</tr>",s+="<tr>",this.showWeekNumbers&&(s+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(e,t){s+="<th>"+t+"</th>"}),s+="</tr>",s+="</thead>",s+="<tbody>";for(var o=0;6>o;o++){s+="<tr>",this.showWeekNumbers&&(s+='<td class="week">'+t[o][0].week()+"</td>");for(var l=0;7>l;l++){var c="available ";c+=t[o][l].month()==t[1][1].month()?"":"off",a&&t[o][l].isBefore(a)||i&&t[o][l].isAfter(i)?c=" off disabled ":t[o][l].format("YYYY-MM-DD")==n.format("YYYY-MM-DD")?(c+=" active ",t[o][l].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(c+=" start-date "),t[o][l].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(c+=" end-date ")):t[o][l]>=this.startDate&&t[o][l]<=this.endDate&&(c+=" in-range ",t[o][l].isSame(this.startDate)&&(c+=" start-date "),t[o][l].isSame(this.endDate)&&(c+=" end-date "));var h="r"+o+"c"+l;s+='<td class="'+c.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+h+'">'+t[o][l].date()+"</td>"}s+="</tr>"}s+="</tbody>",s+="</table>",s+="</div>";var d;if(this.timePicker){s+='<div class="calendar-time">',s+='<select class="hourselect">';var u=0,f=23,p=n.hour();for(this.timePicker12Hour&&(u=1,f=12,p>=12&&(p-=12),0===p&&(p=12)),d=u;f>=d;d++)s+=d==p?'<option value="'+d+'" selected="selected">'+d+"</option>":'<option value="'+d+'">'+d+"</option>";for(s+="</select> : ",s+='<select class="minuteselect">',d=0;60>d;d+=this.timePickerIncrement){var m=d;10>m&&(m="0"+m),s+=d==n.minute()?'<option value="'+d+'" selected="selected">'+m+"</option>":'<option value="'+d+'">'+m+"</option>"}s+="</select> ",this.timePicker12Hour&&(s+='<select class="ampmselect">',s+=n.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',s+="</select>"),s+="</div>"}return s},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},e.fn.daterangepicker=function(t,a){return this.each(function(){var i=e(this);i.data("daterangepicker")&&i.data("daterangepicker").remove(),i.data("daterangepicker",new n(i,t,a))}),this}}(window.jQuery,window.moment),angular.module("angularjssearchbox",["angularjssearchbox.typeahead","ngDateRange"]).directive("sbFocus",["$timeout",function(e){return function(t,n){e(function(){t.useKeywordFacet||n[0].value||n[0].focus()})}}]).directive("repeatDone",function(){return function(e,t){e.bindValueInput(t)}}).directive("searchBox",["$timeout",function(e){return{restrict:"A",templateUrl:"templates/searchBox.html",scope:{resultList:"=",facetList:"=",debug:"=?",dateOptions:"=?",placeholder:"@?"},link:function(t,n){function a(e){for(var n in t.facetList)if(t.facetList[n].name===e)return t.facetList[n];return null}function i(e){for(var t in e)for(var n in e[t].items)e[t].items[n].hasOwnProperty("label")||(e[t].items[n].label=e[t].items[n].name);return e}function s(e,n){for(var a in t.facetList)if(t.facetList[a].name===e)for(var i in t.facetList[a].items)if(t.facetList[a].items[i].name===n)return t.facetList[a].items[i].label;return n}function r(e){for(var n in t.facetList)if(t.facetList[n].name===e)return t.facetList[n].type;return"string"}function o(e){var t=[];for(var n in e){var a=new Object;a.key=e[n].key,a.type=r(a.key),a.value=s(a.key,e[n].value),t.push(a)}return t}t.tmpInputValue=null,t.selectedResult=null,t.debug=t.debug||!1,t.placeholder=t.placeholder||"Filtrer les donnes",t.useKeywordFacet=!1,t.hasKeywordFacet=!1,t.initDone=!1,t.values={},t.showPlaceHolder=!0,t.toDay=moment().format("DD/MM/YYYY"),t.dateOptions=t.dateOptions||{minDate:"01/01/2004",maxDate:moment().add("years",2),showDropdowns:!0,showWeekNumbers:!1,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!1,ranges:{"Aujourd'hui":[moment(),moment()],"Semestre en cours":moment().get("month")<6?[moment().startOf("year"),moment().startOf("year").add("months",6).subtract("days",1)]:[moment().startOf("year").add("months",6),moment().endOf("year")],"Prochain Semestre":moment().get("month")<6?[moment().startOf("year").add("months",6),moment().endOf("year")]:[moment().startOf("year").add("years",1),moment().endOf("year").add("months",6)],"Mois dernier":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"3 prochains mois":[moment().startOf("month"),moment().add("month",3).endOf("month")]},opens:"right",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",format:"DD/MM/YYYY",separator:" - ",singleDatePicker:!1,locale:{applyLabel:"Valider",cancelLabel:"Annuler",fromLabel:"Du",toLabel:"Au",customRangeLabel:"Calendrier",daysOfWeek:["Di","Lu","Ma","Me","Je","Ve","Sa"],monthNames:["Janvier","F&eacute;vrier","Mars","Avril","Mai","Juin","Juillet","Ao&ucirc;t","Septembre","Octobre","Novembre","D&eacute;cembre"],firstDay:1}},t.dateOptionsDate=angular.copy(t.dateOptions),t.dateOptionsDate.singleDatePicker=!0,t.dateOptionsRange=angular.copy(t.dateOptions),t.changeEventDateRange=function(){var n=this.element.context.value,a=this.element[0].attributes["data-tah-index"].value;t.sbResultList[a].value=n,"undefined"!=typeof changeEventDateRangeTimeout&&e.cancel(changeEventDateRangeTimeout),changeEventDateRangeTimeout=e(function(){if(t.hasKeywordFacet&&"text"!=t.sbResultList[t.sbResultList.length-1].key){var e=t.sbResultList.pop();t.sbResultList.splice(t.sbResultList.length-1,0,e),a+=-1}var i=new Object;i.key=t.sbResultList[a].key,i.type=t.sbResultList[a].type,i.value=n,t.resultList[a]=i,t.selectInputFacet(),t.selectedResult=null},500)},t.$watch("facetList",function(e){t.sbFacetList=i(e),t.initDone=!1,t.sbResultList=o(t.resultList),t.hasOwnProperty("selected")||(t.selected={key:"",value:""})}),t.$watch("resultList",function(e){t.initDone=!1,t.sbResultList=o(e)});var l=[9,13,37,38,39,40];n.find("input").bind("keydown",function(n){-1!==l.indexOf(n.which)&&(n.preventDefault(),13===n.which?(t.useKeywordFacet=!0,e(function(){t.useKeywordFacet&&(t.selected.value="",t.initDone=!0,t.hasKeywordFacet?(t.sbResultList[t.sbResultList.length-1].value+=" "+t.selected.key,t.resultList[t.resultList.length-1].value+=" "+t.selected.key):(t.hasKeywordFacet=!0,t.sbResultList.push({key:"text",type:"string",value:t.selected.key}),t.resultList.push({key:"text",type:"string",value:t.selected.key})),t.selected.key="",e(function(){t.selectInputFacet(),t.selectedResult=null}))})):9===n.which&&t.$apply(function(){}))}),n.find("input").bind("focus",function(){t.$apply(function(){t.showPlaceHolder=!1})}).bind("blur",function(){t.$apply(function(){t.showPlaceHolder=!0})}),t.bindValueInput=function(n){e(function(){n.find("input").bind("keydown",function(n){return-1===l.indexOf(n.which)?void(t.initDone=!0):(n.preventDefault(),void((13===n.which||9===n.which)&&(t.hasKeywordFacet&&t.$apply(function(){if("text"!=t.sbResultList[t.sbResultList.length-1].key){var e=t.sbResultList.pop();t.sbResultList.splice(t.sbResultList.length-1,0,e)}}),t.$apply(function(){var a=new Object;a.key=t.sbResultList[n.target.dataset.tahIndex].key,a.type=t.sbResultList[n.target.dataset.tahIndex].type,a.value=t.sbResultList[n.target.dataset.tahIndex].value,t.resultList[n.target.dataset.tahIndex]=a,e(function(){t.selectInputFacet()}),t.selectedResult=null}))))})},50)},t.selectInputFacet=function(){n.find("input")[n.find("input").length-1].focus()},t.getFacetLabel=function(e){for(var n in t.sbFacetList)if(t.sbFacetList[n].name==e)return t.sbFacetList[n].label;return"text"===e?"Mot(s) cl(s)":e},t.getValueName=function(e,n,a){return t.values[e][n].name||a},t.getValues=function(e,n){var i=a(e);return i?"function"==typeof i.items?t.initDone?(t.initDone=!1,i.items(n,e).then(function(n){return t.values[e]=n,n})):[]:(t.values[e]=i.items,i.items):void 0},t.$on("$typeahead.select",function(n,a,i,s){t.$apply(function(){t.useKeywordFacet=!1,-1==s?(t.selected.value="",t.sbResultList.push({key:a.name,type:a.type,value:""}),t.selected.key="",t.initDone=!0):e(function(){if(t.hasKeywordFacet&&"text"!=t.sbResultList[t.sbResultList.length-1].key){var e=t.sbResultList.pop();t.sbResultList.splice(t.sbResultList.length-1,0,e),s+=-1}var n=new Object;n.key=t.sbResultList[s].key,n.type=t.sbResultList[s].type,n.value=t.getValueName(n.key,i,a),t.resultList[s]=n,t.selectInputFacet(),t.selectedResult=null},100)})}),t.selectResult=function(e,n){t.selectedResult=e,angular.element(n.currentTarget).find("input")[0].focus()},t.removeFilter=function(e){"text"===t.sbResultList[e].key&&(t.hasKeywordFacet=!1),t.sbResultList.splice(e,1),t.resultList=t.sbResultList.slice(0)},t.removeAll=function(){t.hasKeywordFacet=!1,t.sbResultList.length=0,t.resultList.length=0}}}}]),angular.module("ngDateRange",[]).directive("dateRange",["$timeout",function(e){return{restrict:"AE",scope:{dateRangeChange:"=",dateRangeOptions:"=",tahIndex:"@?",dateRangeTbutton:"=?"},template:'<span class="SB-addon" ng-if="dateRangeTbutton" ng-click="toggleSingleDate()"><i class="glyphicon glyphicon-calendar fa fa-calendar" ></i>&nbsp;<i class="glyphicon glyphicon-calendar fa fa-calendar" ng-hide="hideRange"></i></span>',link:function(t,n,a){t.dateRangeTbutton=t.dateRangeTbutton||!1,t.tahIndex=t.tahIndex||0,t.dateRangeTbutton&&(t.dateRangeOptions.singleDatePicker=a.value.indexOf("-")>-1?!1:!0),t.hideRange=t.dateRangeOptions.singleDatePicker,t.hideRange&&(t.dateRangeOptions.startDate=a.value,t.dateRangeOptions.endDate=a.value),n.daterangepicker(t.dateRangeOptions,t.dateRangeChange),e(function(){n.parent().append(n.children().detach())}),t.hideRange&&n.data("daterangepicker").container.find(".calendar.left").after(n.data("daterangepicker").container.find(".calendar.right").detach()),t.$watch("dateRangeOptions",function(e){n.data("daterangepicker").setOptions(e,t.dateRangeChange),t.hideRange=e.singleDatePicker,t.hideRange||n.data("daterangepicker").container.find(".calendar.right").hasClass("single")&&(n.data("daterangepicker").container.find(".calendar.left").show(),n.data("daterangepicker").container.find(".calendar.right").removeClass("single"))}),t.$watch("dateRangeChange",function(e){n.data("daterangepicker").setOptions(t.dateRangeOptions,e),t.hideRange=t.dateRangeOptions.singleDatePicker}),t.toggleSingleDate=function(){n.val()&&t.dateRangeOptions.singleDatePicker&&-1==n.val().indexOf("-")&&(n.val(n.val()+" - "+n.val()),t.dateRangeOptions.startDate=n.val(),t.dateRangeOptions.endDate=n.val()),n.val()&&!t.dateRangeOptions.singleDatePicker&&-1!=n.val().indexOf("-")&&(n.val(n.val().slice(0,n.val().indexOf("-")-1)),t.dateRangeOptions.startDate=n.val(),t.dateRangeOptions.endDate=n.val()),t.dateRangeOptions.singleDatePicker=!t.dateRangeOptions.singleDatePicker,t.dateRangeOptions=angular.copy(t.dateRangeOptions),e(function(){n.data("daterangepicker").notify(),e(function(){n.focus()})})}}}}]),angular.module("angularjssearchbox.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$sbtooltip",function(){var e=this.defaults={animation:"am-fade",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,placement:"top",template:"templates/tooltip.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions","$$rAF",function(t,n,a,i,s,r,o,l,c,h){function d(t,i){function s(){return"body"===y.container?c.offset(t[0]):c.position(t[0])}function r(e,t,n,a){var i,s=e.split("-");switch(s[0]){case"right":i={top:t.top+t.height/2-a/2,left:t.left+t.width};break;case"bottom":i={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"left":i={top:t.top+t.height/2-a/2,left:t.left-n};break;default:i={top:t.top-a,left:t.left+t.width/2-n/2}}if(!s[1])return i;if("top"===s[0]||"bottom"===s[0])switch(s[1]){case"left":i.left=t.left;break;case"right":i.left=t.left+t.width-n}else if("left"===s[0]||"right"===s[0])switch(s[1]){case"top":i.top=t.top-a;break;case"bottom":i.top=t.top+t.height}return i}var l={},d=t[0].nodeName.toLowerCase(),y=l.$options=angular.extend({},e,i);l.$promise=f(y.template);var v=l.$scope=y.scope&&y.scope.$new()||n.$new();y.delay&&angular.isString(y.delay)&&(y.delay=parseFloat(y.delay)),y.title&&(l.$scope.title=y.title),v.$hide=function(){v.$$postDigest(function(){l.hide()})},v.$show=function(){v.$$postDigest(function(){l.show()})},v.$toggle=function(){v.$$postDigest(function(){l.toggle()})},l.$isShown=v.$isShown=!1;var D,b;y.contentTemplate&&(l.$promise=l.$promise.then(function(e){var t=angular.element(e);return f(y.contentTemplate).then(function(e){var n=u('[ng-bind="content"]',t[0]);return n.length||(n=u('[ng-bind="title"]',t[0])),n.removeAttr("ng-bind").html(e),t[0].outerHTML})}));var _,w,k,Y;return l.$promise.then(function(e){angular.isObject(e)&&(e=e.data),y.html&&(e=e.replace(g,'ng-bind-html="')),e=p.apply(e),k=e,_=a(e),l.init()}),l.init=function(){y.delay&&angular.isNumber(y.delay)&&(y.delay={show:y.delay,hide:y.delay}),"self"===y.container?Y=t:y.container&&(Y=u(y.container));var e=y.trigger.split(" ");angular.forEach(e,function(e){"click"===e?t.on("click",l.toggle):"manual"!==e&&(t.on("hover"===e?"mouseenter":"focus",l.enter),t.on("hover"===e?"mouseleave":"blur",l.leave),"button"===d&&"hover"!==e&&t.on(m?"touchstart":"mousedown",l.$onFocusElementMouseDown))}),y.show&&v.$$postDigest(function(){"focus"===y.trigger?t[0].focus():l.show()})},l.destroy=function(){for(var e=y.trigger.split(" "),n=e.length;n--;){var a=e[n];"click"===a?t.off("click",l.toggle):"manual"!==a&&(t.off("hover"===a?"mouseenter":"focus",l.enter),t.off("hover"===a?"mouseleave":"blur",l.leave),"button"===d&&"hover"!==a&&t.off(m?"touchstart":"mousedown",l.$onFocusElementMouseDown))}w&&(w.remove(),w=null),v.$destroy()},l.enter=function(){return clearTimeout(D),b="in",y.delay&&y.delay.show?void(D=setTimeout(function(){"in"===b&&l.show()},y.delay.show)):l.show()},l.show=function(){v.$emit(y.prefixEvent+".show.before",l);var e=y.container?Y:null,n=y.container?null:t;w&&w.remove(),w=l.$element=_(v,function(){}),w.css({top:"0px",left:"0px",display:"block"}).addClass(y.placement),y.animation&&w.addClass(y.animation),y.type&&w.addClass(y.prefixClass+"-"+y.type),o.enter(w,e,n,function(){v.$emit(y.prefixEvent+".show",l)}),l.$isShown=v.$isShown=!0,v.$$phase||v.$root.$$phase||v.$digest(),h(l.$applyPlacement),y.keyboard&&("focus"!==y.trigger?(l.focus(),w.on("keyup",l.$onKeyUp)):t.on("keyup",l.$onFocusKeyUp))},l.leave=function(){return clearTimeout(D),b="out",y.delay&&y.delay.hide?void(D=setTimeout(function(){"out"===b&&l.hide()},y.delay.hide)):l.hide()},l.hide=function(e){return l.$isShown?(v.$emit(y.prefixEvent+".hide.before",l),o.leave(w,function(){v.$emit(y.prefixEvent+".hide",l)}),l.$isShown=v.$isShown=!1,v.$$phase||v.$root.$$phase||v.$digest(),y.keyboard&&null!==w&&w.off("keyup",l.$onKeyUp),e&&"focus"===y.trigger?t[0].blur():void 0):void 0},l.toggle=function(){l.$isShown?l.leave():l.enter()},l.focus=function(){w[0].focus()},l.$applyPlacement=function(){if(w){var e=s(),t=w.prop("offsetWidth"),n=w.prop("offsetHeight"),a=r(y.placement,e,t,n);a.top+="px",a.left+="px",w.css(a)}},l.$onKeyUp=function(e){27===e.which&&l.hide()},l.$onFocusKeyUp=function(e){27===e.which&&t[0].blur()},l.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),l.$isShown?t[0].blur():t[0].focus()},l}function u(e,t){return angular.element((t||document).querySelectorAll(e))}function f(e){return i.when(s.get(e)||r.get(e)).then(function(t){return angular.isObject(t)?(s.put(e,t.data),t.data):t})}var p=String.prototype.trim,m="createTouch"in t.document,g=/ng-bind="/gi;return d}]}).directive("bsTooltip",["$window","$location","$sce","$sbtooltip","$$rAF",function(e,t,n,a,i){return{restrict:"EAC",scope:!0,link:function(e,t,s){var r={scope:e};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","type"],function(e){angular.isDefined(s[e])&&(r[e]=s[e])}),angular.forEach(["title"],function(t){s[t]&&s.$observe(t,function(a,s){e[t]=n.trustAsHtml(a),angular.isDefined(s)&&i(function(){o&&o.$applyPlacement()})})}),s.bsTooltip&&e.$watch(s.bsTooltip,function(t,n){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(n)&&i(function(){o&&o.$applyPlacement()})},!0);var o=a(t,r);e.$on("$destroy",function(){o.destroy(),r=null,o=null})}}}]),angular.module("angularjssearchbox.typeahead",["angularjssearchbox.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var e=this.defaults={animation:"am-fade",prefixClass:"typeahead",placement:"bottom-left",template:"templates/typeAhead.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,tahIndex:-1,filter:"filter",limit:6};this.$get=function(t,n,a){function i(t,n,i){var s={},r=angular.extend({},e,i);s=a(t,r);var o=i.scope,l=s.$scope;l.$resetMatches=function(){l.$matches=[],l.$activeIndex=0},l.$resetMatches(),l.$activate=function(e){l.$$postDigest(function(){s.activate(e)})},l.$select=function(e){l.$$postDigest(function(){s.select(e)})},l.$isVisible=function(){return s.$isVisible()},s.update=function(e){l.$matches=e,l.$activeIndex>=e.length&&(l.$activeIndex=0)},s.activate=function(e){l.$activeIndex=e},s.select=function(e){var t=l.$matches[e].value;n.$setViewValue(t),l.$resetMatches(),n.$render(),o&&o.$digest(),l.$emit("$typeahead.select",t,e,r.tahIndex)},s.$isVisible=function(){return r.minLength&&n?l.$matches.length&&angular.isString(n.$viewValue)&&n.$viewValue.length>=r.minLength:!!l.$matches.length},s.$getIndex=function(e){var t=l.$matches.length,n=t;if(t){for(n=t;n--&&l.$matches[n].value!==e;);if(!(0>n))return n}},s.$onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},s.$onKeyDown=function(e){/(38|40|13)/.test(e.keyCode)&&(e.preventDefault(),e.stopPropagation(),13===e.keyCode&&l.$matches.length?s.select(l.$activeIndex):38===e.keyCode&&l.$activeIndex>0?l.$activeIndex--:40===e.keyCode&&l.$activeIndex<l.$matches.length-1?l.$activeIndex++:angular.isUndefined(l.$activeIndex)&&(l.$activeIndex=0),l.$digest())
};var c=s.show;s.show=function(){c(),setTimeout(function(){s.$element.on("mousedown",s.$onMouseDown),r.keyboard&&t.on("keydown",s.$onKeyDown)})};var h=s.hide;return s.hide=function(){s.$element.off("mousedown",s.$onMouseDown),r.keyboard&&t.off("keydown",s.$onKeyDown),h()},s}angular.element(t.document.body);return i.defaults=e,i}}).directive("sbTypeahead",function(e,t,n,a,i){var s=a.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,r){var o={scope:e};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","tahIndex","minLength"],function(e){angular.isDefined(n[e])&&(o[e]=n[e])});var l=o.filter||s.filter,c=o.limit||s.limit,h=n.ngOptions;l&&(h+=" | "+l+":$viewValue"),c&&(h+=" | limitTo:"+c);var d=i(h),u=a(t,r,o),f=function(){d=i(h),d.valuesFn(e,r).then(function(t){t.length>c&&(t=t.slice(0,c)),(1!==t.length||t[0].value!==e.$modelValue)&&(u.update(t),r.$render())})};n.ngOptionsWatch&&e.$watch(n.ngOptionsWatch,f),e.$watch(n.ngModel,function(t){e.$modelValue=t,f()}),r.$render=function(){if(r.$isEmpty(r.$viewValue))return t.val("");var e=u.$getIndex(r.$modelValue),n=angular.isDefined(e)?u.$scope.$matches[e].label:r.$viewValue;n=angular.isObject(n)?n.label:n,t.val(n.replace(/<(?:.|\n)*?>/gm,"").trim())},e.$on("$destroy",function(){u.destroy(),o=null,u=null})}}}),angular.module("angularjssearchbox").run(["$templateCache",function(e){e.put("templates/searchBox.html",'<!--<pre ng-show="debug">Model: {{selected.key | json}} Value : {{ selected.value | json}} opened : {{ opened }}-->\r\n<!--{{!sbResultList.length && showPlaceHolder }}-->\r\n<!--{{ showPlaceHolder }}</pre>-->\r\n<div class="SB-search">\r\n    <div class="SB-search-box-wrapper form-control SB-search-box " >\r\n        <div class="SB-icon SB-icon-search"><span class="glyphicon glyphicon-search"></span></div>\r\n        <div class="SB-placeholder" ng-click="selectInputFacet()"><span ng-if="!sbResultList.length && showPlaceHolder">{{ placeholder }}</span></div>\r\n        <div class="SB-search-inner" >\r\n            <div class="search_parameter" style="padding:0;" ng-hide="sbResultList.length"></div>\r\n            <div class="search_parameter" ng-class="{ selected : $index == selectedResult }"\r\n                 ng-repeat="parameter in sbResultList" ng-click="selectResult($index,$event)"\r\n                 repeat-done>\r\n                <div class="search_parameter_remove SB-icon SB-icon-cancel" ng-click="removeFilter($index)"><span class="glyphicon glyphicon-remove"></span></div>\r\n                <div class="key">{{ getFacetLabel(parameter.key) }} : </div>\r\n                <div class="value"  ng-if="(parameter.type == null || parameter.type == \'string\')"><span class="SB-inputSizer" >{{ parameter.value }}</span>\r\n                <input type="text"\r\n                       data-tah-index="{{ $index }}"\r\n                       ng-model="parameter.value"\r\n                       class="form-control SB-inputValue"\r\n                       limit="999"\r\n                       data-trigger="focus"\r\n                       data-min-length="0"\r\n                       data-container="body"\r\n                       ng-options="element.label as element.label + \' (\' +element.count+\')\' for element in getValues(parameter.key, $viewValue)"\r\n                       sb-focus sb-typeahead>\r\n                </div>\r\n                <div class="input-append input-group value" ng-if="parameter.type == \'date\'">\r\n                    <span class="SB-inputSizer" >{{ parameter.value }}</span>\r\n                    <input type="text"\r\n                           data-tah-index="{{ $index }}"\r\n                           ng-model="parameter.value"\r\n                           ng-if="parameter.type == \'date\'"\r\n                           class="form-control SB-inputValue"\r\n                           value="{{ parameter.value || toDay }}"\r\n                           date-range\r\n                           date-range-options="dateOptionsDate"\r\n                           date-range-change="changeEventDateRange"\r\n                           sb-focus >\r\n                </div>\r\n                <div class="input-append input-group value" ng-if="parameter.type == \'range\'">\r\n                    <span class="SB-inputSizer" >{{ parameter.value }}</span>\r\n                    <input type="text"\r\n                           data-tah-index="{{ $index }}"\r\n                           ng-model="parameter.value"\r\n                           ng-if="parameter.type == \'range\'"\r\n                           class="form-control SB-inputValue"\r\n                           value="{{ parameter.value || toDay }}"\r\n                           date-range\r\n                           date-range-options="dateOptionsRange"\r\n                           date-range-change="changeEventDateRange"\r\n                           sb-focus >\r\n                </div>\r\n                <div class="input-append input-group value" ng-if="parameter.type == \'dateOrRange\'">\r\n                    <span class="SB-inputSizer tgdaterange" >{{ parameter.value }}</span>\r\n                    <input type="text"\r\n                           data-tah-index="{{ $index }}"\r\n                           ng-model="parameter.value"\r\n                           ng-if="parameter.type == \'dateOrRange\'"\r\n                           class="form-control SB-inputValue"\r\n                           value="{{ parameter.value || toDay}}"\r\n                           date-range\r\n                           date-range-options="dateOptions"\r\n                           date-range-tbutton="true"\r\n                           date-range-change="changeEventDateRange"\r\n                           sb-focus >\r\n                </div>\r\n            </div>\r\n            </div>\r\n            <div class="search_parameter input-facet">\r\n            <input\r\n                   data-min-length="0"\r\n                   type="text"\r\n                   ng-model="selected.key"\r\n                   data-limit="30"\r\n                   data-trigger="focus"\r\n                   data-container="body"\r\n                   data-delay="{ show: 500, hide: 0 }"\r\n                   ng-options="element as element.label for element in sbFacetList"\r\n                   class="form-control" sb-typeahead ng-options-watch="sbFacetList">\r\n            </div>\r\n\r\n        </div>\r\n        <div class="SB-icon SB-icon-cancel SB-cancel-search-box" title="clear search" ng-click="removeAll()"><span class="glyphicon glyphicon-remove-circle"></span></div>\r\n    </div>\r\n</div>\r\n<!--<pre ng-show="debug" style="margin-top: 10px;">sbResultList: {{sbResultList | json}} </pre>-->\r\n<!--<pre ng-show="debug">resultList (input/output): {{resultList | json}} </pre>-->\r\n<!--<pre ng-show="debug">sbFacetList (input): {{sbFacetList | json}} </pre>-->\r\n'),e.put("templates/tooltip.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>\n'),e.put("templates/typeAhead.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select">\n  <li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}">\n    <a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a>\n  </li>\n</ul>\n')}]);